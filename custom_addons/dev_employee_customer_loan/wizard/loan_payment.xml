<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

    <record id="loan_payment_wizard" model="ir.ui.view">
            <field name="name">loan.payment.form.view</field>
            <field name="model">loan.payment</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Post Loan EMI">
                    <group>
                        <field name="loan_id" invisible="1"/>
<!--                        <field name="pay_type"/>-->
                        <field name="transaction_date"/>
                        <field name="payment_date"/>
                        <field name="emi_id" domain="[('loan_id', '=', loan_id), ('state', '!=', 'done')]"/>
                        <field name="amount"/>
                    </group>
                    <footer>
                        <button string="Confirm" type="object" name="do_payment"  class="oe_highlight"/>
                        or
                        <button string="Cancel" special="cancel" class="oe_cancel"/>
                    </footer>
                </form>
        </field>
    </record>

        <record id="action_partner_loan_payment" model="ir.actions.act_window">
            <field name="name">Loan Payment</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">loan.payment</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="view_id" ref="loan_payment_wizard"/>
        </record>

    <!-- <record id="multi_loan_payment_wizard" model="ir.ui.view">
            <field name="name">multi.loan.payment.form.view</field>
            <field name="model">multi.loan.payment</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Loan Payment" >
                    <group>
                        <field name="payment_date" />
                    </group>
                     <center>Do you want to Post the selected Entries?</center>
                    <footer>
                        <button string="Yes" type="object" name="do_payment" class="oe_highlight"/>
                        or
                        <button string="No" special="cancel" class="oe_cancel"/>
                    </footer>
                </form>
        </field>
    </record> -->

    <record id="action_partner_multi_loan_payment" model="ir.actions.server">
        <field name="name">Post Installment</field>
        <field name="type">ir.actions.server</field>
        <field name="model_id" ref="model_loan_emi_line" />
        <field name="state">code</field>
        <field name="code">
            if records:
            action = records.do_payment()
        </field>

    </record>

    <record id="action_loan_payment" model="ir.values">
        <field name="name">Post Installment</field>
        <field name="model_id" ref="model_loan_emi_line" />
        <field name="model">loan.emi.line</field>
        <field name="key2">client_action_multi</field>
        <field eval="'ir.actions.server,%d'%action_partner_multi_loan_payment" name="value" />
    </record>

</data>
</openerp>

