<?xml version="1.0" encoding="utf-8"?>
<odoo>
	

	
	<template id="index_inherit" inherit_id='website_hr_recruitment.index'>
		<xpath expr='//ul[@class="media-list"]' position='replace'>
			<script>
				$(document).ready(function(){
				    $(".top_temp_list").each(function(){	
						if ($(this).find("li").length>0){
							$(this).find(".temp_count").text(" ("+$(this).find("li").length+")");
						}
				    });
				    var divList = $("li.top_temp_list");
					divList.sort(function(a, b){ return $(a).data("listing-sequence")-$(b).data("listing-sequence")});
					
					$(".top_temp").html(divList);
				});						
		 	</script>
			<ul class="media-list top_temp" t-if="job_templates">
				<!-- <li t-foreach="job_templates" t-as="template" class="media top_temp_list" style="border-bottom: 1px solid #e7e7e7" t-attf-data-listing-sequence="{{template.job_seniority_id.sequence}}"> -->
				<li t-foreach="job_templates" t-as="template" class="media top_temp_list" style="border-bottom: 1px solid #e7e7e7">
					 <h3 class="media-heading">
                                        <a t-attf-href="/jobs/search/#{ slug(template) }">
                                            <span t-field="template.name"/>
                                            <span class="temp_count"></span>
                                            <!-- <span t-field="template.job_seniority_id.name"/>
                                            <span t-field="template.job_seniority_id.sequence" class="sequence"/> -->
                                        </a>
                                    </h3>
                                    
                                    
                           <ul class="media-list" t-if="jobs" style="margin-left:20px;display:none" >
                             <li t-foreach="jobs" t-as="job" class="media" t-if="job.job_template.id == template.id and job.state!='open'">
                                <div class="media-body" t-att-data-publish="job.website_published and 'on' or 'off'" >
                                    <h4 class="media-heading">
                                        <a t-attf-href="/jobs/detail/#{ slug(job) }">
                                            <!-- <span t-field="job.job_seniority_id.name"/> -->
                                        </a>
                                        <small t-if="job.no_of_recruitment &gt; 1">
                                            <t t-esc="job.no_of_recruitment"/> open positions
                                        </small>
                                    </h4>

                                    <span t-field="job.address_id" t-options='{
                                        "widget": "contact",
                                        "fields": ["address"],
                                        "no_tag_br": True
                                        }'/>
                                    <span t-if="not job.website_published" class="label label-danger">unpublished</span>
                                    <div class="text-muted">
                                        <i class="fa fa-clock-o"/> <span t-field="job.write_date"/>
                                    </div>
                                </div>
                            </li> 
                        </ul>
                        
				</li>
			</ul>
		</xpath>
	</template>
		
		
	<template id="index_temp" name="Jobs">
	    <t t-call="website.layout">
	        <div id="wrap">
	            <div class="oe_structure">
	                <section class="mb16">
	                    <div class="container">
	                        <div class="row">
	                            <div class="col-md-12 text-center mb16">
	                                <h2>Our Job Lists</h2>
	                                <h3 class="text-muted">Join us and help disrupt the enterprise market!</h3>
	                            </div>
	                            <div class="col-md-12">
	                                <p>
	                                    Join us, we offer you an extraordinary chance to learn, to
	                                    develop and to be part of an exciting experience and
	                                    team.
	                                </p>
	                            </div>
	                        </div>
	                    </div>
	                </section>
	            </div>
	
	            <div class="container oe_website_jobs">
	                <div class="row">
	                    <div class="hidden" id="jobs_grid_left">
	
	                    </div>
	                    <div class="col-md-12" id="jobs_grid">
	                        <div t-if="not jobs">
	                            <div class="text-center text-muted">
	                                <h3 class="css_editable_hidden"><a t-attf-href="/page/website.contactus">Contact us</a> for job opportunities.</h3>
	                                <h4 groups="hr_recruitment.group_hr_recruitment_manager">
	                                    Create new job pages from the <strong><i>+New</i></strong> top-right button.
	                                </h4>
	                            </div>
	                        </div>
	                        <ul class="media-list" t-if="jobs">
	                            <li t-foreach="jobs" t-as="job" class="media"  t-if="job.job_template.id == template_id  and job.state!='open'">
	                                <div class="media-body" t-att-data-publish="job.website_published and 'on' or 'off'">
	                                    <h3 class="media-heading">
	                                        <span t-foreach="job.job_seniority_id"  t-as="seniority">
		                                        <div>
		                                        <a t-attf-href="/jobs/detail/#{ slug(job) }">
		                                             <!-- <span t-field="job.name"/>--> 
		                                             	<span t-field="seniority.name"/>
		                                        </a>
		                                        </div>
	                                        </span>
	                                        <div>

	                                        </div>
	                                        <small t-if="job.no_of_recruitment &gt; 1">
	                                            <t t-esc="job.no_of_recruitment"/> open positions
	                                        </small>
	                                    </h3>
	
	                                    <span t-field="job.address_id" t-options='{
	                                        "widget": "contact",
	                                        "fields": ["address"],
	                                        "no_tag_br": True
	                                        }'/>
	                                    
	                                    
	                                           
	                                        <table t-if="job.city_state == True" class="table">
	                                        	<tr><th>City</th><th>City</th><th>Apply</th></tr>
	                                        	<t  t-foreach="job.overwrite_city_ids"  t-as="nlist">
	                                           <tr>
	                                           		<td><t t-esc="nlist.city_wizard"/></td>
	                                           		<td><t t-esc="nlist.state_wizard_id.name"/> </td>
	                                           		<td><a t-attf-href="/jobs/detail/#{ slug(job) }/#{nlist.city_wizard}">Apply</a></td>
	                                           </tr>
	                                           </t>
	                                        </table>
	                                        
	                                    <span t-if="not job.website_published" class="label label-danger">unpublished</span>
	                                    <div class="text-muted">
	                                        <i class="fa fa-clock-o"/> <span t-field="job.write_date"/>
	                                    </div>
	                                </div>
	                            </li>
	                        </ul>
	                    </div>
	                </div>
	            </div>
	        </div>
	    </t>
	</template>
	
	
	
<template id="detail_inherit"  inherit_id='website_hr_recruitment.detail'>
   <xpath expr='//div[@class="js_hr_recruitment"]' position='replace'>
        <div id="wrap" class="js_hr_recruitment container">
            <div class="oe_structure"/>

            <!-- Breadcrumb -->
            <section class="mb16 bg-white">
                <div class="container">
                    <div class="pull-right">
                           <t t-if="over_write_city != False">
	                
	                    <t  t-foreach="over_write_city"  t-as="nlist">
                        	<a t-attf-href="/jobs/apply/#{job.id}/#{over_write_city.city_wizard}" class="btn btn-primary btn-lg pull-right mt32 mb4">Apply Now!</a>
                        </t>
                    </t>
	                <t t-if="over_write_city == False">
                        <a t-attf-href="/jobs/apply/#{job.id}" class="btn btn-primary btn-lg  pull-right mt32 mb4">Apply Now!</a>
                    </t>
                    
                        <br/>
                        <t t-call="website.publish_management">
                            <t t-set="object" t-value="job"/>
                            <t t-set="publish_edit" t-value="True"/>
                        </t>
                    </div>
                    <label class="mb0 mt16"><a href="/jobs">Jobs</a></label> /
					<span t-if="job.job_seniority_id">
                    <h1 class="mb0 mt0" t-field="job.job_seniority_id.name"/>
					</span>
					
	                <t t-if="over_write_city == False">		                
	                    <h4 class="mt0" t-field="job.address_id" t-field-options='{
	                        "widget": "contact",
	                        "fields": ["city"],
	                        "no_tag_br": True
	                    }'/>
                    </t>	
	                <t t-if="over_write_city != False">
	                	<div>
			                <i class="fa fa-map-marker"></i>
			                
	                        <t  t-foreach="over_write_city"  t-as="nlist">
			                	<span t-field="nlist.city_wizard" />,
			                	<span t-field="nlist.state_wizard_id.name" />
			                </t>
			            </div>
	                </t>
                </div>
            </section>
				<span t-if="job.introduction_box">
	            	<div t-field="job.introduction"/><br />
	            </span>
				<span t-if="job.description_box">
	            	<div t-field="job.description"/><br />
	            </span>
				<span t-if="not job.description_box">
	            	<div t-field="job.job_template.job_description"/><br />
	            </span>
				<span t-if="job.final_paragraph_box">
	            	<div t-field="job.final_paragraph"/>
	            </span>
            <div class="oe_structure">
                <section class="o_job_bottom_bar mt32 mb32">
                    <div class="text-center">
                    
	                <t t-if="over_write_city != False">
	                
	                    <t  t-foreach="over_write_city"  t-as="nlist">
                        	<a t-attf-href="/jobs/apply/#{job.id}/#{over_write_city.city_wizard}" class="btn btn-primary btn-lg">Apply Now!</a>
                        </t>
                    </t>
	                <t t-if="over_write_city == False">
                        <a t-attf-href="/jobs/apply/#{job.id}" class="btn btn-primary btn-lg">Apply Now!</a>
                    </t>
                    </div>
                </section>
            </div>
        </div>
        </xpath>
   
</template>	

	<template id="apply_inherit" inherit_id='website_hr_recruitment.apply'>
 		<xpath expr='//h2' position='replace'>
			<h2 t-if="job.sudo().job_seniority_id" class="text-center text-muted">
                <span t-field="job.sudo().job_seniority_id.name"/>
            </h2>
		</xpath> 
		<xpath expr='//form' position='replace'>
		
    				<form action="/website_form/" method="post" class="s_website_form form-horizontal container-fluid mt32" enctype="multipart/form-data" data-model_name="hr.applicant" data-success_page="/applicant/welcome_page/" t-att-data-form_field_department_id="job and job.department_id.id or False" t-att-data-form_field_job_id="job and job.id or False">
                         
   				
                        <div class="form-group form-field o_website_form_required_custom">
                            <div class="col-md-3 col-sm-3 text-right">
                                <label class="control-label" for="partner_name">Name</label>
                            </div>

                            <div class="col-md-2 col-sm-2">
                                <input type="text" class="form-control o_website_form_input" name="partner_name" required="" placeholder="First Name"/>
                            </div>

                            <div class="col-md-2 col-sm-2">
                                <input type="text" class="form-control o_website_form_input" name="middle_name" placeholder="Middle Name"/>
                            </div>

                            <div class="col-md-2 col-sm-2">
                                <input type="text" class="form-control o_website_form_input" name="last_name" required="" placeholder="Last Name"/>
                            </div>

                           
                        </div>
                       
                        <div class="form-group form-field o_website_form_required_custom">
                            <div class="col-md-3 col-sm-3 text-right">
                                <label class="control-label" for="email_from">Your Email</label>
                            </div>
                            <div class="col-md-6 col-sm-6">
                                <input type="email" class="form-control o_website_form_input" name="email_from" required=""/>
                                <input type="hidden" class="form-control o_website_form_input" name="company_id" t-attf-value="{{job.id}}"/>
                                
			                <t t-if="over_write_city != False">	                
			                    <t  t-foreach="over_write_city"  t-as="nlist">
		                                <input type="hidden" class="form-control o_website_form_input" name="job_city" t-attf-value="{{nlist.city_wizard}}"/>
		                        </t>
		                    </t>
                    
                            </div>
                        </div>
                        <div class="form-group form-field o_website_form_required_custom">
                            <div class="col-md-3 col-sm-3 text-right">
                                <label class="control-label" for="partner_phone">Your Phone Number</label>
                            </div>
                            <div class="col-md-6 col-sm-6">
                                <input type="number" id="phone" class="form-control o_website_form_input" name="partner_phone" required=""/>
                            </div>
                        </div>
                        <div class="form-group form-field">
                            <div class="col-md-3 col-sm-3 text-right">
                                <label class="control-label" for="description">Short Introduction</label>
                            </div>
                            <div class="col-md-6 col-sm-6">
                                <textarea class="form-control o_website_form_input" name="description"></textarea>
                            </div>
                        </div>
                        <div class="form-group form-field o_website_form_custom" data_exp="exp">
                          <div class="col-md-3 col-sm-3 text-right">
                            <label class="control-label" for="Resume">Resume</label>
                          </div>
                          <div class="col-md-6 col-sm-6">
                            <input type="file" class="form-control o_website_form_input" name="Resume"/>
                          </div>
                        </div>
                        <div class="form-group form-field o_website_form_custom"> 
                        	<div class="col-md-3 col-sm-3 text-right"></div>
<!--                         	<div t-if="site_key">
                        		<span t-field="job.site_key" class="site_key" style="display:none;"/>
                        	</div> -->
                        	<div class="col-md-6 col-sm-6">
								<script src="https://www.google.com/recaptcha/api.js"></script>              
								<div  class="g-recaptcha"
								data-sitekey="6LfegG8UAAAAAG8oaE5lKA5gzI_zY36zaRImvaBt"
								data-callback="YourOnSubmitFn"></div>
							</div>
							<script>
								$(document).ready(function(){
									$("body").on('click', ".o_website_form_send", function() {
									if($("name"))
									setTimeout(function(){
									    if($("#o_website_form_result").text().indexOf("An error has occured, the form has not been sent.") &gt;= 0){
									    	$("#o_website_form_result").text("Please enter valid captcha")
									    }
									}, 100);
									});
					
									var dateformat = /^([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))$/;					
								
								    $("body").delegate(".o_website_form_send_apply", "click", function() {
								
								    var n=0;
								    $(".datepicker_custom").each(function() {
								    	if($(this).val()!=''){
								
											if(!$(this).val().match(dateformat))
											{
											    n=1;
											}
										}
								    });		
								    $(".form_academic_exp").each(function() {
								    	if($(this).val()==''){
											    n=2;
										}
								    });		
								    $(".form_academic_institution").each(function() {
								    	if($(this).val()==''){
											    n=2;
										}
								    });	
								    $(".form_academic_diploma").each(function() {
								    	if($(this).val()==''){
											    n=2;
										}
								    });		
								    $(".form_academic_fos").each(function() {
								    	if($(this).val()==''){
											    n=2;
										}
								    });		
								
										if($('.academic_info_arr').val() == '' || n==2){
											alert('Please enter your academic experience');
										}else if(n==1){
											alert('Date format in Experiences and Certifications should be yyyy-mm-dd (i.e 2019-07-25)');
										}else{
											$(".o_website_form_send").click();		
										}
								    });
								
								});
							</script>
                        </div>
                        <div class="form-group">
                            <div class="col-md-offset-3 col-sm-offset-4 col-sm-8 col-md-7" id="submit_form" >
                                <span class="btn btn-primary btn-lg o_website_form_send" style="display:none;">Submit</span>
                                 <span class="btn btn-primary btn-lg o_website_form_send_apply">Submit</span>                                
                                <span id="o_website_form_result"></span>
                            </div>
                        </div>
                    </form>
                    
		</xpath>
	</template>
	<template id="thankyou_inherit" inherit_id='website_hr_recruitment.thankyou'>
		<xpath expr='//div[contains(@class, "oe_structure")]' position='replace'>
			<div class="oe_structure">
				<div class="container">
					<h1>Thank you!</h1>
					<p>
						Your job application has been successfully registered,
						we will
						get back to you soon.
					</p>
				</div>
				<section class="oe_dark">
					<div class="container">
						<div class="row">
							<div class="col-md-12 text-center mt16 mb16">

								<a class="btn btn-primary btn-lg" href="'survey/start/user-feedback-form-1">
									Start Survey
								</a>

								<!--<a href="/" class="btn btn-primary btn-lg">Survey test</a> -->
							</div>
						</div>
					</div>
				</section>
			</div>
		</xpath>

	</template>
	
</odoo>
