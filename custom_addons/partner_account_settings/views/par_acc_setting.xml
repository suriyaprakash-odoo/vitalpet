<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="billpay_view_company_form_inherit" model="ir.ui.view">
		<field name="name">res.company.form</field>
		<field name="model">res.company</field>
		<field name="inherit_id" ref="vitalpet_bill_pay.billpay_view_company_form" />
		<field name="arch" type="xml">
			<xpath expr="//form/sheet/notebook/page[@name='billpay_config']" position="inside">
				<group string="Partner Account Settings">
					<group>
						<field name="property_account_receivable_id"  domain="[('user_type_id', '=','Receivable'), ('company_id','=', id)]"/>
						<field name="property_account_payable_id" domain="[('user_type_id', '=','Payable'), ('company_id','=', id)]"/>
					</group>
				</group>
			</xpath>
		</field>
	</record>

	<record id="view_partner_tree_inherit" model="ir.ui.view">
		<field name="name">res.partner.tree</field>
		<field name="model">res.partner</field>
		<field name="inherit_id" ref="base.view_partner_tree" />
		<field name="arch" type="xml">
			<xpath expr="//field[@name='phone']" position='after'>
				<field name="property_account_receivable_id" />
				<field name="property_account_payable_id" />
			</xpath>

		</field>
	</record>



	<record id="action_account_properties" model="ir.actions.server">
		<field name="name">Partner &amp; Account Properties</field>
		<field name="model_id" ref="model_res_partner" />
		<field name="state">code</field>
		<field name="code">
				if context.get('active_model') == 'res.partner' and context.get('active_ids'):
				action_values = env.ref('partner_account_settings.action_set_account_property').read()[0]
				action_values.update({'context': context})
				action = action_values
			</field>
	</record>

	<record id="ir_account_properties" model="ir.values">
		<field eval="'client_action_multi'" name="key2" />
		<field eval="'res.partner'" name="model" />
		<field name="name">Partner &amp; Asset Properties</field>
		<field eval="'ir.actions.server,%d'%action_account_properties" name="value" />
	</record>

</odoo>
