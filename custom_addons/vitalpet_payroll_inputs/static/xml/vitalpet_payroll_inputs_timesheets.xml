<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <!--
        This template is the payroll input timesheet page".
    -->
    <t t-name="vitalpet_payroll_inputs.HomePage">
    	
    	<div class="o_dashboards">
            <div class="container-fluid o_website_dashboard">
<!--             o_website_dashboard class used for append values
 -->            </div>
        </div>
    </t>
    
    <t t-name="vitalpet_payroll_inputs.TimesheetPage">
    	
	  <style>
        .header_panel {
            background-color:white; padding-top: 10px;
            padding-right: 16px;
            padding-bottom: 10px;
            padding-left: 16px;
            background-color: white;
            border-bottom: 1px solid #a8a8a8;
        }
        .o_grid_schedule_total {
            color: white;
            background-color: #54a1ec  !important;
            text-align: right;
        }
        .o_grid_attendance_total {
            color: white;
            background-color: #7e7a7a !important;
            text-align: right;
        }
        .o_grid_work_hours_total, td.work_hours_col:last-child {
            color: white;
            background-color: #0f8c1d !important;
            text-align: right;
        }
        .o_grid_work_hours_total input, td.work_hours_col:last-child input{
            color: #8f8f8f;
        }
        .blue_color {
        	color:blue;
        }
        tr td.attendance_col:last-child, .attendance_row{
            background-color: #7e7a7a !important;
            color:#fff;
        }
        
        .o_search_options .o_filters_menu li.selected > span::before {
		    font-family: FontAwesome;
		    position: absolute;
		    left: 6px;
		    content: "\f00c";
		}
		
		.o_search_options .o_filters_menu li.selected > span {
		    color: #4d4d4d;
		    font-weight: bold;
		}
		
		//.open .dropdown-menu > li > span {
		    //padding: 3px 25px;
		//}
		.dropdown-menu > li > span {
		    display: block;
		    //padding: 3px 20px;
		    clear: both;
		    font-weight: normal;
		    line-height: 1.42857143;
		    color: #333333;
		    white-space: nowrap;
		}
        </style>
        <div class="o_view_manager_content">
            <div class="row header_panel" >
                <div class="col-md-12">
                	<div>
                		<t t-if="values.filter_timesheet == 'all_timesheet'">
                			<h4>All Timesheets</h4>
                		</t>
                		<t t-if="values.filter_timesheet != 'all_timesheet'">
                			<h4><t t-esc="values.employee_name" /></h4>
                		</t>
                	</div>
                    <div class="o_cp_left">
                        <div class="o_cp_buttons"><div>
                        
                        <button class="grid_arrow_previous btn btn-sm btn-primary timesheet_previous" type="button">
                            <span class="fa fa-arrow-left"></span>
                        </button>
                        <button class="grid_arrow_next btn btn-sm btn-primary timesheet_next" type="button">
                            <span class="fa fa-arrow-right"></span>
                        </button>
                        <div class="btn-group btn-group-sm">
                            <button t-attf-class="grid_arrow_range btn btn-sm btn-default week_button time_sheet_weeks #{(values.week_type == 'week') and 'active'}" type="button" data-name="week">
                                Week
                            </button>
                            <button t-attf-class="grid_arrow_range btn btn-sm btn-default week_button time_sheet_weeks #{(values.week_type == 'two_weeks') and 'active'}"  type="button" data-name="two_weeks">
                                2 Weeks
                            </button>
                            
                        </div>
                        <div class="btn-group">Pay Period </div>
                        <div class="btn-group">
                            
                            <select class="oe_inline payroll_period" style="padding-right:11px;">
                            	<t t-set="i" t-value="0" />
                            	<t t-foreach="values.payroll_periods" t-as="payroll_periods">
                            		<t t-set="i" t-value="i+1" />
                            		<t t-if="payroll_periods.id === values.current_period">
                            			<option t-att-data_id="i" t-att-value="payroll_periods.id" t-att-class="(payroll_periods.state == 'open') and 'blue_color'" selected="selected"><t t-esc="payroll_periods.name" /></option>
                            			
                            		</t>
                            		<t t-if="payroll_periods.id !== values.current_period">
                            			<option  t-att-data_id="i" t-att-value="payroll_periods.id" t-att-class="(payroll_periods.state == 'open') and 'blue_color'"><t t-esc="payroll_periods.name" /></option>
                            		</t>
                            	</t>
                             
                            </select>
                            <input name="week_no" class="week_no" type="hidden" t-att-value="values.week_no" />
                        </div>
                        <div class="btn-group">
                            <button class="grid_arrow_previous btn btn-sm btn-primary employee_previous" type="button">
                                <span class="fa fa-arrow-left"></span>
                            </button>
                            <span class="btn btn-sm btn-primary" style="cursor:default;"><span class="employee_number"><t t-esc="values.employee_number"  /></span> of <t t-esc="values.total_employee" /></span>
                            <button class="grid_arrow_next btn btn-sm btn-primary  employee_next" type="button">
                                <span class="fa fa-arrow-right"></span>
                            </button>
                        </div>
                        <div class="btn-group" style="float:right; padding-right:11px;">
                        	<select class="filter_timesheet" name="filter_timesheet" style="padding-right:11px;">
                        		<t t-if="values.filter_timesheet == 'my_timesheet'">
                        			<option value="my_timesheet" selected="selected">My Timesheet</option>
                        			<option value="all_timesheet">All Timesheet</option>
                        			<option value="team_member">By Team member</option>
                        		</t>
                        		<t t-if="values.filter_timesheet == 'all_timesheet'">
                        			<option value="my_timesheet">My Timesheet</option>
                        			<option value="all_timesheet"  selected="selected">All Timesheet</option>
                        			<option value="team_member">By Team member</option>
                        		</t>
                        		<t t-if="values.filter_timesheet == 'team_member'">
                        			<option value="my_timesheet">My Timesheet</option>
                        			<option value="all_timesheet">All Timesheet</option>
                        			<option value="team_member"  selected="selected">By Team member</option>
                        		</t>
                        	</select>
                        	<t t-if="values.filter_timesheet == 'team_member'">
                       			<select name="current_employee" class="current_employee" style="visibility:hidden;">
	                       			<t t-set="i" t-value="0" />
	                       			<t t-foreach="values.employee_ids" t-as="employee_id">
	                       				<t t-set="i" t-value="i+1" />
	                       				<t t-if="employee_id.id == values.current_employee">
	                       					<option t-att-data_id="i" t-att-value="employee_id.id" selected="selected"><t t-esc="employee_id.name" /></option>
	                       				</t>
	                       				<t t-if="employee_id.id != values.current_employee">
	                       					<option t-att-data_id="i" t-att-value="employee_id.id"><t t-esc="employee_id.name" /></option>
	                       				</t>
	                       			</t>                 		
                       			</select>
                       		</t>
                       		
                       		
                        	<select class="filter_module" name="filter_module" style="padding-right:11px;">
                        		<t t-if="values.filter_module == 'all'">
                        			<option value="all" selected="selected">All</option>
                        		</t>
                        		<t t-if="values.filter_module != 'all'">
                        			<option value="all">All</option>
                        		</t>
                        		
                        		<t t-if="values.filter_module == 'schedule'">
                        			<option value="schedule" selected="selected">Schedule</option>
                        		</t>
                        		<t t-if="values.filter_module != 'schedule'">
                        			<option value="schedule">Schedule</option>
                        		</t>
                        		
                        		<t t-if="values.filter_module == 'leaves'">
                        			<option value="leaves" selected="selected">Leaves</option>
                        		</t>
                        		<t t-if="values.filter_module != 'leaves'">
                        			<option value="leaves">Leaves</option>
                        		</t>
                        		
                        		<t t-if="values.filter_module == 'attendance'">
                        			<option value="attendance" selected="selected">Attendance</option>
                        		</t>
                        		<t t-if="values.filter_module != 'attendance'">
                        			<option value="attendance">Attendance</option>
                        		</t>
                        		
                        		<t t-if="values.filter_module == 'work_hours'">
                        			<option value="work_hours" selected="selected">Work Hours</option>
                        		</t>
                        		<t t-if="values.filter_module != 'work_hours'">
                        			<option value="work_hours">Work Hours</option>
                        		</t>
                        	</select>
                       		
                        </div>
                    </div>
                </div>
            </div>
                
                	<!-- <div class="o_cp_right">
			            <div class="btn-group o_search_options" style="display: block;">
			            <div class="btn-group o_dropdown">
					    <button class="o_dropdown_toggler_btn btn btn-sm dropdown-toggle" data-toggle="dropdown">
					        <span class="fa fa-filter"></span> Filters <span class="caret"></span>
					    </button>
					    <ul class="dropdown-menu o_filters_menu" role="menu">
					        <li data-index="0" class="selected">
						        <span>My Timesheets</span>
						    </li><li data-index="1">
						        <span>All Timesheets</span>
						    </li><li data-index="2">
						        <span>By Team member</span>
						    </li>
					    </ul>
					</div>
					<div class="btn-group hidden-xs o_dropdown">
					    <button class="o_dropdown_toggler_btn btn btn-sm dropdown-toggle" data-toggle="dropdown">
					        <span class="fa fa-bars"></span> Group By <span class="caret"></span>
					    </button>
					    <ul class="dropdown-menu o_group_by_menu" role="menu">
					        <li data-index="0">
					        <span>Status</span>
					    </li><li data-index="1">
					        <span>Partner</span>
					    </li><li data-index="2">
					        <span>Submit Date</span>
					    </li><li data-index="3">
					        <span>Sender</span>
					    </li><li data-index="4">
					        <span>Source</span>
					    </li>
					    </ul>
					</div>
			</div>
			           </div> -->
                </div>
            </div>
            <div class="row col-md-12">
                 <div class="o_view_grid">
                    <table class="table table-condensed table-responsive table-striped">
                       <thead>
                          <tr>
                             <th class="o_grid_title_header"><button t-if="values.filter_module == 'all'" class="grid_arrow_previous btn btn-sm btn-primary work_hours_copy" type="button">
                            Copy Attendance to Workhours
                        </button></th>
                             <th class="o_grid_title_header"></th>
							   <t t-set="i" t-value="1" />
                              <t t-foreach="values.dates" t-as="dates">
                                <th t-att-record_date_num="i" t-att-record_date="dates.d2" ><t t-raw="dates.d1" ></t></th>
								  <t t-set="i" t-value="i+1"/>
                             </t>
                             <th class="o_grid_total">Total</th>
                          </tr>
                       </thead>
                       
                       <tbody>
                       <t t-if="values.filter_module == 'all' or values.filter_module == 'leaves'">
						<t t-foreach="values.leaves" t-as="leaves">
								<tr>
		                             <th colspan="2">
		                                <div>
		                                   <div title="leaves"><t t-esc="leaves.leave_type_name"></t></div>
		                                </div>
		                             </th>
		                             <t t-foreach="leaves.leave_type_values" t-as="leave_type_values">
		                             	<td>
		                             		<div class="o_grid_cell_container" data-path="grid.0.0">
			                                   <i class="fa fa-search-plus o_grid_cell_information" title="See all the records aggregated in this cell"></i>
			                                   <div class="o_grid_input" ><t t-esc="leave_type_values"></t></div>
			                            	</div>
			                            </td>
		                             </t>
		                             
		                             <td class="o_grid_total"><t t-esc="leaves.leave_type_total" t-options="{'widget': 'float_time'}" /></td>		                          </tr>
						</t>
						
						<t t-foreach="values.total_leaves" t-as="total_leaves">
							 <tr class="o_grid_total">
	                           		<td class="o_grid_add_line">Leave</td>
	                           		<td>Total</td>
	                             <t t-foreach="total_leaves.total_leave_values" t-as="total_leave_values">
	                             	<td>
	                             		<div class="o_grid_cell_container" data-path="grid.0.0">
		                                   <i class="fa fa-search-plus o_grid_cell_information" title="See all the records aggregated in this cell"></i>
		                                   <div class="o_grid_input" ><t t-esc="total_leave_values"></t></div>
		                            	</div>
		                            </td>
	                             </t>
	                             
	                             <td class="o_grid_total"><t t-esc="total_leaves.total_leave_total" /></td>
	                          </tr>
						</t>
						
                       </t>
                       
                       <t t-if="values.filter_module == 'all' or values.filter_module == 'schedule'">   
                        <t t-foreach="values.schedules" t-as="schedules">
								<tr>
		                             <th colspan="2">
		                                <div>
		                                   <div title="leaves"><t t-esc="schedules.sch_emp"></t></div>
		                                </div>
		                             </th>
		                             <t t-foreach="schedules.sch_values" t-as="sch_values">
		                             	<td>
		                             		<div class="o_grid_cell_container" data-path="grid.0.0">
			                                   <i class="fa fa-search-plus o_grid_cell_information" title="See all the records aggregated in this cell"></i>
			                                   <div class="o_grid_input" ><t t-esc="sch_values"></t></div>
			                            	</div>
			                            </td>
		                             </t>
		                             
		                             <td class="o_grid_schedule_total"><t t-esc="schedules.total_sch_values" t-options="{'widget': 'float_time'}" /></td>
		                             		                          </tr>
						</t>
						
							 <tr class="o_grid_schedule_total">
	                           		<td class="o_grid_add_line">Schedule</td>
	                           		<td>Total</td>
	                             	<t t-foreach="values.schedules_tot" t-as="schedules_tot">
		                             	<td>
		                             		<div class="o_grid_cell_container" data-path="grid.0.0">
			                                   <i class="fa fa-search-plus o_grid_cell_information" title="See all the records aggregated in this cell"></i>
			                                   <div class="o_grid_input" ><t t-esc="schedules_tot"></t></div>
			                            	</div>
			                            </td>
		                             </t>
		                             
		                             <td class="o_grid_schedule_total"><t t-esc="values.schedules_tot_all" t-options="{'widget': 'float_time'}" /></td>
		                             	
	                          </tr>
						
                          
                       </t>
                       <t t-if="values.filter_module == 'all' or values.filter_module == 'attendance'">      
						   <t t-set="i" t-value="1" />
						   <t t-set="j" t-value="1" />
                           <t t-foreach="values.jobs" t-as="jobs">
								<tr class="attendance_emp_row" t-att-data_index="j">
		                             <th colspan="2">
		                                <div>
		                                   <div title="leaves" class="emp_id_find_attendance" t-att-emp_id="jobs.emp_id" t-att-job_id="jobs.job_id"><t t-esc="jobs.job_name"></t></div>
		                                </div>
		                             </th>
									
		                             <t t-foreach="jobs.job_values" t-as="job_values">
		                             	<td class="attendance_col">
		                             		<div class="o_grid_cell_container" data-path="grid.0.0">
			                                   <i class="fa fa-search-plus o_grid_cell_information" title="See all the records aggregated in this cell"></i>
			                                   <div class="o_grid_input"  t-att-data-attendance="i"><t t-esc="job_values"></t></div>
			                            	</div>
			                            </td>
										<t t-set="i" t-value="i+1"/>
		                             </t>
									<td class="attendance_col"><t t-esc="jobs.total_job_values" t-options="{'widget': 'float_time'}" /></td>
		                          </tr>
		                        <t t-set="j" t-value="j+1"/>  
						    </t>
                           <t t-foreach="values.jobs_total" t-as="jobs">
								<tr class="attendance_row">
		                             <th>
		                                <div>
		                                   <div title="Attendance" ><t t-esc="jobs.job_name"></t></div>
		                                </div>
		                             </th>
                                    <td>Total</td>
		                             <t t-foreach="jobs.job_values" t-as="job_values">
		                             	<td class="attendance_col">
		                             		<div class="o_grid_cell_container" data-path="grid.0.0">
			                                   <i class="fa fa-search-plus o_grid_cell_information" title="See all the records aggregated in this cell"></i>
			                                   <div class="o_grid_input" ><t t-esc="job_values"></t></div>
			                            	</div>
			                            </td>
		                             </t>

		                          </tr>
						    </t>

						</t>
						<t t-if="values.filter_module == 'all' or values.filter_module == 'work_hours'">   
						   <t t-set="i" t-value="1" />
						   <t t-set="j" t-value="1" />
                           <t t-foreach="values.work_hours" t-as="work_hours">
								<tr class="work_hours_row">
		                             <th>
		                                <div>
		                                   <div title="Work Hours" class="emp_id_find_work_hours" t-att-emp_id="work_hours.emp_id" t-att-job_id="work_hours.job_id"><t t-esc="work_hours.job_name"></t></div>
		                                </div>
		                             </th>
		                             <td>
										<t t-if="values.current_period_state === 'done'">
												<span t-esc="checkbox" />
											</t>
											<t t-if="values.current_period_state !== 'done'">
												<input type="checkbox" t-att-data-workhours="i" t-att-class="'data_checkbox'+j"  />
											</t>
									</td>
		                             <t t-foreach="work_hours.work_values" t-as="work_values">

		                             	<td class="work_hours_col_readonly">
		                             		<div class="o_grid_cell_container" data-path="grid.0.0">
			                                   <i class="fa fa-search-plus o_grid_cell_information" title="See all the records aggregated in this cell"></i>
			                                   <div class="o_grid_input" >
			                                   <t t-if="values.current_period_state === 'done'">
															<span t-esc="work_values" />
														</t>
														<t t-if="values.current_period_state !== 'done'">
															<input type="text" t-att-data-workhours="i" t-att-value="work_values" readonly="readonly"/>
														</t>
			                                   
			                                   </div>
			                            	</div>
			                            </td>
						  				 <t t-set="i" t-value="i+1" />
		                             </t>
		                             <td class="work_hours_col">
		                             		<div class="o_grid_cell_container" data-path="grid.0.0">
			                                   <i class="fa fa-search-plus o_grid_cell_information" title="See all the records aggregated in this cell"></i>
			                                   <div class="o_grid_input" ><t t-esc="work_hours.total_work_values" /></div>
			                            	</div>
			                            </td>
		                          </tr>

								<t t-set="j" t-value="j+1"/> 

						    </t>


								<tr class="o_grid_work_hours_total">
									 <td class="o_grid_add_line">Work Hours</td>
									 <td>Total</td>
		                             <t t-foreach="values.total_work_hours" t-as="total_works">
		                             	<td class="work_hours_col">
		                             		<div class="o_grid_cell_container" data-path="grid.0.0">
			                                   <i class="fa fa-search-plus o_grid_cell_information" title="See all the records aggregated in this cell"></i>
			                                   <div class="o_grid_input" ><t t-esc="total_works"></t></div>
			                            	</div>
			                            </td>
		                             </t>
		                             <td class="work_hours_col"><t t-esc="values.total_work_hours_all" t-options="{'widget': 'float_time'}" /></td>
		                          </tr>
					
                           <t t-if="values.filter_module == 'all'" t-foreach="values.sch_work_total" t-as="jobs">
								<tr>
									 <td class="o_grid_add_line">Schedule vs Work Hours</td>
									 <td>Total</td>
		                             <t t-foreach="values.total_work_hours_diff" t-as="total_work_hours_diff">
		                             	<td>
		                             		<div class="o_grid_cell_container" data-path="grid.0.0">
			                                   <i class="fa fa-search-plus o_grid_cell_information" title="See all the records aggregated in this cell"></i>
			                                   
			                                   		<t t-if="total_work_hours_diff.diff_type == 1">
			                                   			<div class="o_grid_input" style="color:red;">
			                                   			<t t-esc="total_work_hours_diff.diff_hours" ></t>
			                                   			</div>
			                                   		</t>
			                                   		<t t-if="total_work_hours_diff.diff_type != 1">
			                                   			<div class="o_grid_input">
			                                   			<t t-esc="total_work_hours_diff.diff_hours" ></t>
			                                   			</div>
			                                   		</t>
			                            	</div>
			                            </td>
		                             </t>
		                              <td><t t-esc="values.tot_diff_hours" /></td>
		                            
		                          </tr>
						    </t>

						</t>
                       </tbody>
                    </table>
                 </div>
              </div>
       </div> 
		
		

	    
    
    </t>
</templates>