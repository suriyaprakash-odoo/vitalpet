<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
    
    	<!-- QUESTIONS -->
       <record model="ir.ui.view" id="survey_question_form_inherited">
            <field name="name">Form view for survey question</field>
            <field name="model">survey.question</field>
            <field name="inherit_id" ref="survey.survey_question_form"/>
            <field name="arch" type="xml">
            	<field name="type" position="before">
            		<field name="check" invisible="1"/>
            	</field>
            	<xpath expr="//notebook/page[1]" position="replace">
            		<page string="Answers">
	                     <field name="validation_email" attrs="{'invisible': [('type', '!=', 'textbox')]}"/>
	                     <label for="validation_email" attrs="{'invisible': [('type', '!=', 'textbox')]}"/>
	                     <separator />
	                     <label for="labels_ids" attrs="{'invisible': [('type', 'not in', ['simple_choice', 'multiple_choice', 'matrix'])]}" />
	                     <field name="labels_ids" string="Type of answers" context="{'default_question_id': active_id}" attrs="{'invisible': [('type', 'not in', ['simple_choice', 'multiple_choice', 'matrix'])]}">
	                         <tree editable="bottom">
	                             <field name="sequence" style="width:10"/>
	                             <field name="value" string="Answers"/>
	                             <field name="quizz_mark"/>
	                         </tree>
	                     </field>
	                     <separator />
	                     
	                     <label for="labels_ids_2" attrs="{'invisible': [('type', 'not in', ['matrix'])]}" />
	                     <field name="labels_ids_2" context="{'default_question_id_2': active_id}" attrs="{'invisible': [('type', 'not in', ['matrix'])]}">
	                         <tree editable="bottom">
	                             <field name="sequence" widget="handle"/>
	                             <field name="value" string="Answers"/>
	                             <field name="x_weight"/>
	                             <field name="line" invisible="1"/>
	                         </tree>
	                     </field>
	                     
	                     <separator />
	                     <button name="add_description" string="Add Description" type="object" class="oe_right" icon="STOCK_ADD" attrs="{'invisible': [('type', 'in', ['free_text','textbox','numerical_box','datetime','simple_choice','multiple_choice'])]}"/>
	                     <label for="descriptions_id" attrs="{'invisible': [('type', 'in', ['free_text','textbox','numerical_box','datetime','simple_choice','multiple_choice'])]}" />
	                     <field name="descriptions_id" context="{'default_question_id_3': active_id}" attrs="{'readonly':[('check','=',False)],'invisible': [('type', 'in', ['free_text','textbox','numerical_box','datetime','simple_choice','multiple_choice'])]}">
	                         <tree editable="bottom">
	                             <field name="sequence_no" /><!-- on_change="onchange_sequence(sequence_no)" -->
	                             <field name="label_id_que" string="Answers" domain="[('question_id_2', '=', parent.id)]"/>
	                             <field name="label_id" domain="[('question_id', '=', parent.id)]"/>
	                             <field name="description"/>
	                         </tree>
	                     </field>
                   </page>
            	</xpath>
            </field>
            </record>
            




    <template id="survey.matrix" name="Matrix">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th> </th>
                    <th t-foreach="question.labels_ids" t-as="col_label"><span t-field="col_label.value" /></th>
                </tr>
            </thead>
            <tbody>
                <tr t-foreach="question.labels_ids_2" t-as="row_label">
                    <th><span t-field="row_label.value" /></th>
                    <td t-foreach="question.labels_ids" t-as="col_label">
				        <t t-foreach="question.descriptions_id" t-as="row_ans_matrix">
				        	<t t-if="row_ans_matrix">
			                    <t t-if="row_label.id == row_ans_matrix.label_id_que.id">
			                    	<t t-if="col_label.id == row_ans_matrix.label_id.id">
			                    		<input t-if="question.matrix_subtype == 'simple'" type="radio" t-att-name="'%s_%s' % (prefix, row_label.id)" t-att-value='col_label.id' />
	                        			<input t-if="question.matrix_subtype == 'multiple'" type="checkbox" t-att-name="'%s_%s_%s' % (prefix, row_label.id, col_label.id)" t-att-value='col_label.id' />
		                        		<span t-field="row_ans_matrix.description"/>
		                    		</t> 
		                    	</t>
				        	</t>  
	                    </t>
	                    <t t-if="not question.descriptions_id">
                    		<input t-if="question.matrix_subtype == 'simple'" type="radio" t-att-name="'%s_%s' % (prefix, row_label.id)" t-att-value='col_label.id' />
                      		<input t-if="question.matrix_subtype == 'multiple'" type="checkbox" t-att-name="'%s_%s_%s' % (prefix, row_label.id, col_label.id)" t-att-value='col_label.id' />
                    	</t>
                    </td>
                </tr>
            </tbody>
        </table>
        <div t-if='question.comments_allowed'>
            <span t-field="question.comments_message"/>
            <input type="text" class="form-control" t-att-name="'%s_%s' % (prefix, 'comment')" />
        </div>
    </template>
    
    <record model="ir.ui.view" id="survey_uner_input_inherited">
            <field name="name">survey.user_input</field>
            <field name="model">survey.user_input</field>
            <field name="inherit_id" ref="survey.survey_user_input_form"/>
            <field name="arch" type="xml">
            	<field name="quizz_score" position="attributes">
            		<attribute name="groups"></attribute>
            	</field>
            	
            	<field name="quizz_mark" position="attributes">
            		<attribute name="invisible">1</attribute>
            	</field>
   			 </field>
    </record>
    
    	<record model="ir.ui.view" id="survey_uner_input_libne_inherited">
            <field name="name">survey.user_input_line.form</field>
            <field name="model">survey.user_input_line</field>
            <field name="inherit_id" ref="survey.survey_user_input_line_form"/>
            <field name="arch" type="xml">
            	
            	<field name="skipped" position="after">
            		<field name ="weightage_cal" invisible="1"/>
            	</field>
    		</field>
    	</record>
    </data>
</odoo>
